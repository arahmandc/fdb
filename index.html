<!DOCTYPE html>
<html lang="en" >
<head>
    <title>DashBoard</title>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tabletop.js/1.5.1/tabletop.min.js"></script>

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.4/dist/leaflet.css" integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA==" crossorigin="">
    <script src="https://unpkg.com/leaflet@1.3.4/dist/leaflet.js" integrity="sha512-nMMmRyTVoLYqjP9hrbed9S+FzjZHW5gY1TWCHA5ckwXZBadntCNs8kEqAWdrb9O7rxbCaA4lKTIWjDXZxflOcA==" crossorigin=""></script>

    <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.3.1.min.js"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css">
    <link rel="stylesheet" href="https://rawgit.com/python-visualization/folium/master/folium/templates/leaflet.awesome.rotate.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js"></script>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css">

     <link rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css'>

    <!--  <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/blueimp-gallery.min.css" rel="stylesheet">
    <link href="css/custom.css" rel="stylesheet">
 -->
    <!-- Custom Fonts-->
    <!-- <link href="font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Quicksand:400,700,400italic,700italic" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700" rel="stylesheet" type="text/css"> -->


      <meta charset="utf-8">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.4.0/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.4.0/dist/leaflet.js"></script>
  <script src="https://d3js.org/d3.v3.min.js"></script>
  <script src="https://d3js.org/topojson.v1.min.js"></script>
  <script src="https://d3js.org/d3-tile.v0.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/leaflet.esri/1.0.4/esri-leaflet.js"></script>



<style>
@font-face {
    font-family: "Arial MT Std";
    src: url(https://gfw2-data.s3.amazonaws.com/fires/d3/Dashboard/ArialMTStd-LightCond.otf) format("opentype");
    font-weight: normal;
}
@font-face {
    font-family: "Arial MT Std";
    src: url(https://gfw2-data.s3.amazonaws.com/fires/d3/Dashboard/ArialMTStd-BoldCond.otf) format("opentype");
    font-weight: bold;
}
body {
  font-family: "Arial MT Std", Helvetica, sans-serif, Arial;
  position: relative;
}
h1{
  color: #424242;
  font-size: 18px;
  margin: 5px;
  text-align: center;
  text-transform: uppercase;
  letter-spacing: 1px;
}
h2{
  color: #424242;
  font-size: 16px;
  margin: 0px;
  text-align: center;
  font-weight: bolder;
}
h3{
  display: block;
  font-size: 16px;
  margin: 15px;
  font-weight: normal;
}
h4{
  display: block;
  margin: 0px;
  text-align: center;
  font-weight: normal;
  font-size: 14px;
}

.background {
  fill: none;
  pointer-events: all;
}
.mesh {
  fill: none;
  stroke: #fff;
  stroke-linecap: round;
  stroke-linejoin: round;
}
.axis path,
.axis line {
  fill: none;
  stroke: darkgray;
  stroke-width: 1;
  shape-rendering: crispEdges;
}
.axis text {
  font-size: 11px;
}
#info{
  /*z-index: 1;*/
/*  position:relative;*/
/*  width:200px;*/
  text-align-last: center;
  height:80px;
  padding:10px;
  background-color:transparent;
  border-radius:10px;
  margin-left: 10px;
  /*box-shadow: 4px 4px 10px rgba(0,0,0,0.1);*/
}
#info2 {
  z-index: 1;
/*   position:relative;*/
/*  width: 100px;*/
  overflow: hidden;
  float: left;
}
#info2 h2 {
  font-size: 24px;
  text-align: right;
  margin-top: 5px;
}

#info3 {
  width: 110px;
  overflow: hidden;
}
#info3 h2 {
}
#info.hidden{
  display:none;
}
#info p{
  margin:0px;
  font-size:12px;
}

#chartDiv rect{
  fill:#D68178;
}
#chartDiv rect.selected{
  fill:darkred;
}
#chartDiv svg {
}

#barChart, #pieDiv1, #pieDiv2 {
}

#map {
  width: 700px;
  height: 600px;
  border: 1px dashed darkgray;
}

#pieDiv1 path {
  stroke: #fff;
}
#pieDiv1 text {
  font-size: 10px;
  fill:white;
}
#pieDiv2 path {
  stroke: #fff;
}
#pieDiv2 text {
  font-size: 10px;
  fill:white;
}
#barChart text {
  font-size: 10px;
  fill:black;
}
#dashboard{
  overflow: hidden;
  margin: auto;
  width: 1010px;
}
#left{
  width: 700px;
  float: left;
}
#right{
  overflow: hidden;
  width: 300px;
}
#right svg {
  display: block;
  margin: auto;
}
    
    
#customers {
  font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
  border-collapse: collapse;
  width: 100%;
}
#customers td, #customers th {
  border: 1px solid #ddd;
  padding: 4px;
}
#customers tr:nth-child(even){background-color: #f2f2f2;}
/*#customers tr:hover {background-color: #ddd;}*/
#customers th {
  padding-top: 2px;
  padding-bottom: 2px;
  text-align: center;
  background-color: #2ca25f;
  color: white;
}

  </style>

<style>
* {box-sizing: border-box;}

.img-comp-container {
  position: relative;
  align-items: center;
  height: 200px; /*should be the same height as the images*/
}

.img-comp-img {
  position: absolute;
  width: auto;
  height: auto;
  overflow:hidden;
}

.img-comp-img img {
  display:block;
  vertical-align:middle;
}

.img-comp-slider {
  position: absolute;
  z-index:9;
  cursor: ew-resize;
  /*set the appearance of the slider:*/
  width: 40px;
  height: 40px;
  background-color: #2196F3;
  opacity: 0.7;
  border-radius: 50%;
}
</style>

<style>
divv {
  padding: 5px;
}

.img1 {
  float: right;
}

.clearfix {
  overflow: auto;
}

.img2 {
  float: left;
  padding-right: 5px;
}
</style>

<script>
function initComparisons() {
  var x, i;
  /*find all elements with an "overlay" class:*/
  x = document.getElementsByClassName("img-comp-overlay");
  for (i = 0; i < x.length; i++) {
    /*once for each "overlay" element:
    pass the "overlay" element as a parameter when executing the compareImages function:*/
    compareImages(x[i]);
  }
  function compareImages(img) {
    var slider, img, clicked = 0, w, h;
    /*get the width and height of the img element*/
    w = img.offsetWidth;
    h = img.offsetHeight;
    /*set the width of the img element to 50%:*/
    img.style.width = (w / 2) + "px";
    /*create slider:*/
    slider = document.createElement("DIV");
    slider.setAttribute("class", "img-comp-slider");
    /*insert slider*/
    img.parentElement.insertBefore(slider, img);
    /*position the slider in the middle:*/
    slider.style.top = (h / 2) - (slider.offsetHeight / 2) + "px";
    slider.style.left = (w / 2) - (slider.offsetWidth / 2) + "px";
    /*execute a function when the mouse button is pressed:*/
    slider.addEventListener("mousedown", slideReady);
    /*and another function when the mouse button is released:*/
    window.addEventListener("mouseup", slideFinish);
    /*or touched (for touch screens:*/
    slider.addEventListener("touchstart", slideReady);
    /*and released (for touch screens:*/
    window.addEventListener("touchstop", slideFinish);
    function slideReady(e) {
      /*prevent any other actions that may occur when moving over the image:*/
      e.preventDefault();
      /*the slider is now clicked and ready to move:*/
      clicked = 1;
      /*execute a function when the slider is moved:*/
      window.addEventListener("mousemove", slideMove);
      window.addEventListener("touchmove", slideMove);
    }
    function slideFinish() {
      /*the slider is no longer clicked:*/
      clicked = 0;
    }
    function slideMove(e) {
      var pos;
      /*if the slider is no longer clicked, exit this function:*/
      if (clicked == 0) return false;
      /*get the cursor's x position:*/
      pos = getCursorPos(e)
      /*prevent the slider from being positioned outside the image:*/
      if (pos < 0) pos = 0;
      if (pos > w) pos = w;
      /*execute a function that will resize the overlay image according to the cursor:*/
      slide(pos);
    }
    function getCursorPos(e) {
      var a, x = 0;
      e = e || window.event;
      /*get the x positions of the image:*/
      a = img.getBoundingClientRect();
      /*calculate the cursor's x coordinate, relative to the image:*/
      x = e.pageX - a.left;
      /*consider any page scrolling:*/
      x = x - window.pageXOffset;
      return x;
    }
    function slide(x) {
      /*resize the image:*/
      img.style.width = x + "px";
      /*position the slider:*/
      slider.style.left = img.offsetWidth - (slider.offsetWidth / 2) + "px";
    }
  }
}
</script>



</head>
<body>

  <div style="margin-top: 20px"><h1></h1></div>
<div style=""><h2 style="color: #fff">DashBoard</h2></div>
<!-- Navigation -->
    <nav class="navbar navbar-custom navbar-fixed-top" role="navigation">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-main-collapse">
                    <i class="fa fa-bars"></i>
                </button>
                <a class="navbar-brand page-scroll" href="index.html">
                    <h1 style="text-align: center;">Health Facilities Field data Collection</h1>
                </a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse navbar-right navbar-main-collapse">
                <ul class="nav navbar-nav">
                    <!-- Hidden li included to remove active class from about link when scrolled up past about section -->
                    <li class="hidden">
                        <a href="#page-top"></a>
                    </li>
                    <li>
                        <a class="page-scroll" href="index.html">DashBoard</a>
                    </li>
                    <li>
                        <a class="page-scroll" href="collector.html">Collector Board</a>
                    </li>
                    <li>
                        <a class="page-scroll" href="map.html">Map</a>
                    </li>
                    <li>
                        <a class="page-scroll" href="blog.html">Blog</a>
                    </li>
<!--                     <li>
                        <a class="page-scroll" href="#contact">Contact</a>
                    </li> -->
                </ul>
            </div>
        </div>
    </nav>
<hr>



<div id="dashboard">
  <div id="left">
      <br>
    <h3>Objective</h3>
    <div >
          A health facility is, in general, any location where healthcare is provided. Health facilities range from small clinics and doctor's offices to urgent care centers and large hospitals with elaborate emergency rooms and trauma centers. The number and quality of health facilities in a country or region is one common measure of that area's prosperity and quality of life.
        <di class="clearfix">
  <img class="img2" src="images/imagslg.png" alt="Pineapple" width="400" height="250">
<!--  <p style="text-align: justify"> -->
   
    In populated country urban access to health services is a complex issue that often leaves the urban poor more vulnerable and disadvantaged than their rural counterparts. Urban dwellers live in a more densely crowded area, where even they do not know about the nearest health facilities in their emergency moment. As urban areas are more densely and crowded People sometimes don’t know about the nearest Health Care Facilities which causes utter sufferings for the patients and their relatives.Bangladesh is a densely populated and rapidly developing country in the world. Every year thousands of people come across to urban areas like Dhaka to earn their livelihood. As a result the importance of Health Care Facilities are increasing  day by day. The health care facilities like Hospital, Clinic, Diagnostic center, Dental Care, Pharmacy or Blood Banks  play a vital role in Dhaka city for it’s big population to provide fundamental human right.The newcomer people even sometimes local people do not know the actual position of Health Facilities in their crisis moment. In these circumstances people especially women, children and aged people face unbound misery because of unknowing actual location of Health Facilities. In Dhaka City many people die because their relatives or responsible people can not reach at hospital in proper time. It sometimes happen because of their ignorance of where the health facilities are located.In this Situation we are not only facing human pain and suffering, we are wasting our valuable time and economy even sometimes we lose lives of our lovable relatives. In our emergency moment we often forget  the name and location our nearest Health Facilities. From this point a Humanitarian Map can give tremendous support to find out the desire Health Care center. Bangladesh Humanitarian OpenStreetMap Operational Team (BHOOT) voluntarily organization who are contributing on OpenStreetMap to help out vulnerable people all over the world through physical and remote support.To reduce human sufferings, pains and miseries Bangladesh Humanitarian OpenStreetMap Operational Team (BHOOT) have taken an initiative project using OpenStreetMap platform to improve Humanitarian Rights and Public Health Facilities for the people to ensure social and humanitarian responsibilities for the people of all classes. Where Bangladesh Humanitarian OpenStreetMap Operational Team (BHOOT) added 9 types of Health Facilities Data - Hospital, Clinic, Pharmacy, Dental Clinic, Private Doctor,  on the open platform OpenStreetMap as their humanitarian work.Through this footpace of BHOOT Bangladesh Government will get a vast and statistical knowledge about the number, location and status of the Health Facilities around Dhaka City of Bangladesh. This data will show how many Health Facilities are needed and where should they situated as required according to density of population.This initiated project is also a part of making  Digital Bangladesh by which people will find amenities in their daily needs . Now a days every sector like social and economical and commercial stage Map Data plays a very important role for the success, uses and potentially. So, the contribution of Bangladesh Humanitarian OpenStreetMap Operational Team (BHOOT) will help all stages of human life and improve the social and economical status of Bangladesh. As well as this data will enrich OpenStreetMap data with a chank of qualitiful field level data.
    
<!--   </p>  -->


    </div>

  
    <h3>Chart View</h3>

        <!-- <img src="logof.jpg" alt="logof" width="160" height="160" float="left"> -->

        <iframe width="519" float="right" height="230" seamless frameborder="0" scrolling="no" src="https://docs.google.com/spreadsheets/d/e/2PACX-1vQ1Rovoh3n0pR8BZPNJ21bZf98mc8LOJlSSiW2viyuGgsT_MFvin64vvN-Gs4JWIu4qMAq00ipCFBQq/pubchart?oid=2119435433&amp;format=interactive"></iframe>

    
       <!--  map -->
    <h3>Map View</h3>
    <div id="map"></div>
   

    

</div>

  <div id="right">
      <h1 id="place">Dhaka City</h1>
      <h2 id="number">Year 2019<h2>

    <!-- table 1 -->

    <iframe width="240" height="280" src="https://docs.google.com/spreadsheets/d/10WZkK0NEw77FHICRADyN8O5ej1AqPQHm2RJ6eHPT-AE/pubhtml/sheet?headers=false&amp;gid=1953632142&amp;range=b112:c123"></iframe>
     
     <!-- counters -->



</div>

</div>





<!-- footer  -->

<div style="height: 100px" align="center">
  <h5>All Data Collected By...</h5>
  <a href="https://www.facebook.com/groups/ask.bhoot/" target="_blank"><img src="images/logo.png" width="" height="80px"/></a> 
</div>

<!-- Creator Name -->
<div style="margin-top: 10px" "margin-right:20px" "margin-bottom: 20px" align="right">DashBoard Created by <a href="https://arahmandc.github.io/" target="_blank">Atikur Rahman</a> & <a href="https://www.facebook.com/arefin.legacy/" target="_blank">Samsul Arafin</a></div>


<!-- java script -->



<script type="text/javascript">

function init() {

    // these URLs come from Google Sheets "shareable link" form
    // the first is the polygon layer and the second the points
  var polyURL = "https://docs.google.com/spreadsheets/d/1ktit1Ifunw8kLRXvlKAJTGzRinbFgM-5exeyh_x5_R0/edit?usp=sharing";
  var pointsURL = "https://docs.google.com/spreadsheets/d/10WZkK0NEw77FHICRADyN8O5ej1AqPQHm2RJ6eHPS-AE/edit?usp=sharing";

    Tabletop.init( { key: pointsURL,
                     callback: addPoints,
                     simpleSheet: true } );  // simpleSheet assumes there is only one table and automatically sends its data
    Tabletop.init( { key: polyURL,
                     callback: addPolygons,
                     simpleSheet: true } );
}
window.addEventListener("DOMContentLoaded", init);

// Create a new Leaflet map centered on the continental Dhaka, Bangladesh


var map = L.map("map").setView([23.7816, 90.4154], 12);

// This is the Carto Positron basemap
var basemap = L.tileLayer("https://cartodb-basemaps-{s}.global.ssl.fastly.net/light_all/{z}/{x}/{y}{r}.png", {
    attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> &copy; <a href="https://cartodb.com/attributions">CartoDB</a>',
    subdomains: "abcd",
    maxZoom: 19
});
basemap.addTo(map);

// These are declared outisde the functions so that the functions can check if they already exist
var polygonLayer;
var pointGroupLayer;

// addPolygons first checks if the map layer has already been assigned, and if so, deletes it and makes a fresh one
// The assumption is that the locally stored JSONs will load before Tabletop.js can pull the external data from Google Sheets
function addPolygons(data) {
    if (polygonLayer != null) {
        // If the layer exists, remove it and continue to make a new one with data
        polygonLayer.remove()
    }

    // Need to convert the Tabletop.js JSON into a GeoJSON
    // Start with an empty GeoJSON of type FeatureCollection
    // All the rows will be inserted into a single GeoJSON
    var geojsonStates = {
        "type": "FeatureCollection",
        "features": []
    };

    for (var row in data) {
        // The Sheets data has a column "include" that specifies if that row should be mapped
        if (data[row].include == "y") {
            var coords = JSON.parse(data[row].geometry);

            geojsonStates.features.push({
                "type": "Feature",
                "geometry": {
                    "type": "MultiPolygon",
                    "coordinates": coords
                },
                "properties": {
                    "name": data[row].name,
                    "summary": data[row].summary,
                    "state": data[row].state,
                    "local": data[row].local,
                    "clinic": data[row].clinic,
                    "dental": data[row].dental,
                    "doctor": data[row].doctor,
                    "hospital": data[row].hospital,
                    "pharmacy": data[row].pharmacy,
                    "veterinary": data[row].veterinary,
                    "bb": data[row].bb,
                    "dc": data[row].dc,
                    "tc": data[row].tc,
                    "total": data[row].total,
                    "color": data[row].color,
                }
            });
        }
    }

    // The polygons are styled slightly differently on mouse hovers
    var poylgonStyle = {"color": "#2ca25f", "fillColor": "#99d8c9", "weight": 1.5};
    var polygonHoverStyle = {"color": "#2ca25f", "fillColor": "#2ca25f", "weight": 3};

    polygonLayer = L.geoJSON(geojsonStates, {
        onEachFeature: function (feature, layer) {
            layer.bindPopup("<h2>"+feature.properties.name+"</h2><p>"+"Clinic:"+feature.properties.clinic+"</p><p>"+"Dental Clinic:"+feature.properties.dental+"</p><p>"+"Doctors Chamber:"+feature.properties.doctor+"</p><p>"+"Hospital:"+feature.properties.hospital+"</p><p>"+"Pharmacy:"+feature.properties.pharmacy+"</p><p>"+"Veterinary Hospital:"+feature.properties.veterinary+"</p><p>"+"Blood Bank:"+feature.properties.bb+"</p><p>"+"Diagnostic center:"+feature.properties.dc+"</p><p>"+"Therapie Center:"+feature.properties.tc+"</p><p>"+"Status:"+feature.properties.summary+"</p>");
            // fillColor
            // poylgonStyle.fillColor = feature.properties.color<=50 ? "red" : feature.properties.color<=100 ? "#2ca25f" :"2ca25f";
            layer.on({
                mouseout: function(e) {
                  console.log(e);
                    e.target.setStyle(poylgonStyle);
                },
                mouseover: function(e) {
                    e.target.setStyle(polygonHoverStyle);
                },
                click: function(e) {
                    // This zooms the map to the clicked polygon
                    // Not always desirable
                    // map.fitBounds(e.target.getBounds());
                }
            });
        },
        style: poylgonStyle
    }).addTo(map);
}

// addPoints is a bit simpler, as no GeoJSON is needed for the points
// It does the same check to overwrite the existing points layer once the Google Sheets data comes along
function addPoints(data) {
    if (pointGroupLayer != null) {
        pointGroupLayer.remove();
    }
    pointGroupLayer = L.layerGroup().addTo(map);

    for(var row = 0; row < data.length; row++) {
        var marker = L.marker([data[row].lat, data[row].long]).addTo(pointGroupLayer);
        marker.bindPopup("<h2>"+data[row].location+"</h2>There's a "+data[row].level+" "+data[row].category+" here");

        // AwesomeMarkers is used to create fancier icons
        var icon = L.AwesomeMarkers.icon({
            icon: "info-sign",
            iconColor: "white",
            markerColor: getColor(data[row].category),
            prefix: "glyphicon",
            extraClasses: "fa-rotate-0"
        });
        marker.setIcon(icon);

    }
}

// Returns different colors depending on the string passed
// Used for the points layer

function getColor(type) {
    switch (type) {
        case "Coffee Shop":
            return "green";
        case "Restaurant":
            return "blue";
        default:
            return "green";

    }
}
</script>
<script>
/*Execute a function that will execute an image compare function for each element with the img-comp-overlay class:*/
initComparisons();
</script>

</body>
</html>
